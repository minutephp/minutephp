<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:mx="library://ns.adobe.com/flex/halo" xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" frameRate="30">
	<!-- The target object will be an image called "myImage" - you have to define the name property. -->
	<!-- It is a good practice to set the size for the Image object to the actual
	size of the image, otherwise the effects will not work due to an incorrect size
	of the Image component -->
	<mx:Image width="655" height="181" source="myImage.jpg" id="myImage" name="myImage" autoLoad="true" scaleContent="true" complete="loadComplete()" x="100" y="100"/>
	<fx:Script>
		<![CDATA[
			import com.jumpeye.Events.FLASHEFFEvents;
			import com.jumpeye.flashEff2.symbol.brightSquares.FESBrightSquares;
			import com.jumpeye.flashEff2.symbol.equalizer.FESEqualizer;
			import FlashEff2Flex;
			
			import mx.flash.UIMovieClip;
			
			private var myEffect:FlashEff2Flex;
			private var showEffect:FESBrightSquares;
			private var hideEffect:FESEqualizer;
			
			private function loadComplete():void {
				// Once the image has been loaded, create the FlashEff2Flex component
				// instance, set it up and apply it on the image.
				myEffect = new FlashEff2Flex();
				
				// The hide transition starts 3 seconds after the show transition
				// has endded.
				myEffect.hideDelay = 3;
				myEffect.addEventListener(FLASHEFFEvents.TRANSITION_END, restartShowEffect);
				
				// Create the show and hide pattern instances. These instances will
				// actually execute the show and hide effects.
				showEffect = new FESBrightSquares();
				showEffect.squareWidth = 20
				showEffect.squareHeight = 20;
				showEffect.tweenDuration = 2;
				myEffect.showTransition = showEffect;
				
				hideEffect = new FESEqualizer();
				hideEffect.equalizerPercentage = 50;
				hideEffect.tweenDuration = 2;
				myEffect.hideTransition = hideEffect;
				
				// The FlashEff2Flex instance MUST be added to the display list before
				// setting the target object.
				addElement(myEffect);
				myEffect._targetInstanceName = "myImage";
			}
			
			private function restartShowEffect(evt:FLASHEFFEvents):void {
				// Once the hide transition has endded, restart the show transition.
				var effectInstance:FlashEff2Flex = evt.target as FlashEff2Flex;
				if (effectInstance.currentTransitionType == "hide") effectInstance.show();
			}
		]]>
	</fx:Script>
</s:Application>
